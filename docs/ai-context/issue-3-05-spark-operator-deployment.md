# Issue #3-05: Spark Operator 배포 및 고가용성 스케줄링 검증

## 📅 날짜: 2025-12-31
## 👤 참여자: 임성현, Gemini

## 1. 이슈 개요
- **목표**: Helm을 사용하여 Spark Operator를 배포하고, 물리적 자원이 우수한 노드(server-03, 04)에 워크로드가 배치되도록 스케줄링 정책을 적용함.
- **결과**: `my-spark-operator` 컨트롤러 및 웹훅 파드가 각각 k8s-worker-02, 03 노드에서 정상 가동(Running) 확인.

## 2. 주요 성과 및 대화 요약
- **[물리 자원 매핑 최적화]**: 호스트 서버 스펙(8c/16t)을 고려하여 `k8s-worker-02, 03` 노드에 `workload-type=spark-executor` 라벨을 부여하고 Operator를 배치함.
- **[Helm 커스텀 배포]**: `nodeSelector`를 활용하여 파드 배치 전략을 강제하고, `webhook` 활성화를 통해 Spark 애플리케이션의 동적 설정 주입 기반 마련.
- **[대화 요약]**: 헬름 설치부터 노드 라벨 스왑(1,2 -> 2,3), 그리고 실제 파드의 물리 노드 배치 상태 확인까지의 E2E 배포 프로세스 완료.

## 3. 기술적 의사결정 및 트러블슈팅
- **기술적 선택: Webhook & Controller 분리 배치**: 스케줄러에 의해 컨트롤러와 웹훅이 서로 다른 워커 노드에 배치됨으로써 특정 노드 장애 시 관리 평면의 가용성 확보.
- **트러블슈팅: Node Role Reassignment**: `worker-01`의 역할을 `orchestration`으로 변경함에 따라 기존 스케줄링 의존성을 해결하고 고성능 노드로의 이주를 성공적으로 유도함.

## 4. 결론 및 향후 계획
- **결론**: Spark Operator 가동을 위한 인프라 및 소프트웨어 레이어 준비 완료.
- **차기 과제**: 
    - **버전 호환성 체크**: 사용 가능한 Spark 이미지 버전 확인.
    - **테스트 잡(Job) 제출**: SparkPi 예제를 통한 Webhook 및 Executor 생성 로직 검증.
    - **MinIO 연동**: S3A 커넥터를 이용한 이벤트 로그 저장 설정.